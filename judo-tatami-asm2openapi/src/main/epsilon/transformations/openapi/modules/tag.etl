import "../../../operations/openapi/_importAll.eol";

import "api.etl";

rule CreateTag
    transform s : ASM!EReference
    to t : OPENAPI!Tag {
        guard: asmUtils.isGraph(s)
        
		t.name = s.name.toOpenAPIName();
		
		var root = asmUtils.getResolvedRoot(s);
        if (root.isPresent()) {
		    t.description = "Exposed graph with " + root.get().name + " instances as root";
		    asmUtils.getActorTypeOfGraph(s).get().equivalent("CreateOpenAPIActorType").tags.add(t);
        }
}
