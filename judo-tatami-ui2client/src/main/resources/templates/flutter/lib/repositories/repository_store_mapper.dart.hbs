//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

part of {{ variable ap.name }}.repository;

class {{ fqClass ap.name }}RepositoryStoreMapper {

{{# each application.dataElements }}
  static {{ fqClass name }}Store create{{ fqClass name }}StoreFrom{{ fqClass name }}({{ fqClass name }} {{ variable name }}) {
    if ({{ variable name }} == null) {
      return null;
    }
    var {{ variable name }}Store = {{ fqClass name }}Store();
    map{{ fqClass name }}To{{ fqClass name }}Store({{ variable name }}, {{ variable name }}Store);
    return {{ variable name }}Store;
  }

  static void map{{ fqClass name }}To{{ fqClass name }}Store({{ fqClass name }} {{ variable name }}, {{ fqClass name }}Store {{ variable name }}Store) {
    // Identifier
    {{# if isMapped ~}}
    {{ variable name }}Store.signedIdentifier = {{ variable name }}.signedIdentifier;
    {{ variable name }}Store.referenceIdentifier = {{ variable name }}.referenceIdentifier;
    {{/ if }}
    // Attributes
    {{# each attributes ~}}
    {{ variable ../name }}Store.{{ name }} = {{ variable ../name }}.{{ name }};
    {{/ each }}
    // Relations
    {{# each relations ~}}
        {{# if isEmbedded ~}}
            {{# if isCollection ~}}
    {{ variable ../name }}Store.{{ name }}.addAll({{ variable ../name }}.{{ name }}.map<{{ fqClass target.name }}Store>(({{ variable target.name }}) {
      var {{ variable target.name }}Store = {{ fqClass target.name }}Store();
      map{{ fqClass target.name }}To{{ fqClass target.name }}Store({{ variable target.name }}, {{ variable target.name }}Store);
      return {{ variable target.name }}Store;
    }).toList());
            {{ else }}
      map{{ fqClass target.name }}To{{ fqClass target.name }}Store({{ variable ../name }}.{{ name }}, {{ variable ../name }}Store.{{ name }});
            {{/ if }}
        {{/ if }}
    {{/ each }}
  }

  static {{ fqClass name }} create{{ fqClass name }}From{{ fqClass name }}Store({{ fqClass name }}Store {{ variable name }}Store) {
    if ({{ variable name }}Store == null) {
      return null;
    }
    var {{ variable name }} = {{ fqClass name }}();
    map{{ fqClass name }}StoreTo{{ fqClass name }}({{ variable name }}Store, {{ variable name }});
    return {{ variable name }};
  }

  static void map{{ fqClass name }}StoreTo{{ fqClass name }}({{ fqClass name }}Store {{ variable name }}Store, {{ fqClass name }} {{ variable name }}) {
    {{# if isMapped ~}}
    {{ variable name }}.signedIdentifier = {{ variable name }}Store.signedIdentifier;
    {{ variable name }}.referenceIdentifier = {{ variable name }}Store.referenceIdentifier;
    {{/ if }}
    // Attributes
    {{# each attributes ~}}
        {{# unless isReadOnly ~}}
            {{ variable ../name }}.{{ name }} = {{ variable ../name }}Store.{{ name }};
        {{/ unless }}
    {{/ each }}
    // Relations
    {{# each relations ~}}
        {{# if isEmbedded ~}}
            {{# if isCollection ~}}
    {{ variable ../name }}Store.{{ name }}.addAll({{ variable ../name }}.{{ name }}.map<{{ fqClass target.name }}Store>(({{ variable target.name }}) {
      var {{ variable target.name }}Store = {{ fqClass target.name }}Store();
      create{{ fqClass target.name }}From{{ fqClass target.name }}Store({{ variable target.name }}Store);
      return {{ variable target.name }}Store;
    }).toList());
            {{ else }}
      create{{ fqClass target.name }}From{{ fqClass target.name }}Store({{ variable ../name }}Store.{{ name }});
            {{/ if }}
        {{/ if }}
    {{/ each }}

  }

  static {{ fqClass name }}Extended create{{ fqClass name }}ExtendedFrom{{ fqClass name }}Store({{ fqClass name }}Store {{ variable name }}Store) {
    var {{ variable name }} = {{ fqClass name }}Extended();
    map{{ fqClass name }}StoreTo{{ fqClass name }}Extended({{ variable name }}Store, {{ variable name }});
    return {{ variable name }};
  }

  static void map{{ fqClass name }}StoreTo{{ fqClass name }}Extended({{ fqClass name }}Store {{ variable name }}Store, {{ fqClass name }}Extended {{ variable name }}) {
    // Attributes
    {{# each attributes ~}}
        {{# unless isReadOnly ~}}
    {{ variable ../name }}.{{ name }} = {{ variable ../name }}Store.{{ name }};
        {{/ unless }}
    {{/ each }}
    // Relations
    {{# each relations ~}}
        {{# unless isReadOnly ~}}
            {{# if isCollection ~}}
    {{ variable ../name }}Store.{{ name }}.addAll({{ variable ../name }}Store.{{ name }}.map<{{ fqClass target.name }}Store>(({{ variable target.name }}Store) {
      var {{ variable target.name }} = {{ fqClass target.name }}Store();
      create{{ fqClass target.name }}ExtendedFrom{{ fqClass target.name }}Store({{ variable target.name }}Store);
      return {{ variable target.name }};
    }).toList());
            {{ else }}
      if ({{ variable ../name }}Store.{{ name }} != null) {
        create{{ fqClass target.name }}ExtendedFrom{{ fqClass target.name }}Store({{ variable ../name }}Store.{{ name }});
      }
            {{/ if }}
        {{/ unless }}
    {{/ each }}
  }
{{/ each }}
}
