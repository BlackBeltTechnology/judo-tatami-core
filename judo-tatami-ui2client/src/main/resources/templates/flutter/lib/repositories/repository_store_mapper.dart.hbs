//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

part of {{ variable ap.name }}.repository;

class {{ fqClass ap.name }}RepositoryStoreMapper {

{{# each classes as |class| }}
  // MAPPERS FOR {{className name}}
  static {{ fqClass name }}Store create{{ fqClass name }}StoreFrom{{ fqClass name }}({{ fqClass transferObjectTypeName }} {{ variable name }}) {
    if ({{ variable name }} == null) {
      return null;
    }
    var {{ variable name }}Store = {{ fqClass name }}Store();
    map{{ fqClass name }}To{{ fqClass name }}Store({{ variable name }}, {{ variable name }}Store);
    return {{ variable name }}Store;
  }

  static void map{{ fqClass name }}To{{ fqClass name }}Store({{ fqClass transferObjectTypeName }} {{ variable name }}, {{ fqClass name }}Store {{ variable name }}Store) {
    // Identifier
    {{# if isMapped }}
    {{ variable name }}Store.internal__identifier = {{ variable name }}.internal__identifier;
    {{ variable name }}Store.internal__signedIdentifier = {{ variable name }}.internal__signedIdentifier;
    {{ variable name }}Store.internal__referenceIdentifier = {{ variable name }}.internal__referenceId;
    {{ variable name }}Store.internal__updatable = {{ variable name }}.internal__updatable;
    {{ variable name }}Store.internal__deletable = {{ variable name }}.internal__deletable;

    {{/ if }}
    // Attributes
    {{# each attributes as |attribute| }}
        {{~# if (isEnumType attribute.dataType) }}
    if ({{ variable class.name }}.{{ attribute.name }} != null) {
        {{ variable class.name }}Store.{{ attribute.name }} = {{ className attribute.dataType.name }}.values[{{ variable class.name }}.{{ attribute.name }}.index];
    }
        {{ else }}
    {{ variable class.name }}Store.{{ attribute.name }} = {{ variable class.name }}.{{ attribute.name }};
        {{/if}}
    {{/ each }}
    // Relations
    {{# each relations }}
        {{# if isRelationEmbedded }}
    if ({{ variable class.name }}.{{ name }} != null) {
            {{# if isCollection }}
      {{ variable class.name }}Store.{{ name }}.addAll({{ variable class.name }}.{{ name }}.map<{{ fqClass target.name }}Store>(({{ variable target.name }}) {
        var {{ variable target.name }}Store = {{ fqClass target.name }}Store();
        map{{ fqClass target.name }}To{{ fqClass target.name }}Store({{ variable target.name }}, {{ variable target.name }}Store);
        return {{ variable target.name }}Store;
      }).toList());
            {{ else }}
      var {{ variable name }} = {{ fqClass target.name }}Store();
      map{{ fqClass target.name }}To{{ fqClass target.name }}Store({{ variable class.name }}.{{ name }}, {{ variable name }});
      {{ variable class.name }}Store.set{{ className name }}({{ variable name }});
            {{/ if }}
    }
        {{/ if }}
    {{/ each }}
  }

  static {{ fqClass transferObjectTypeName }} create{{ fqClass name }}From{{ fqClass name }}Store({{ fqClass name }}Store {{ variable name }}Store) {
    if ({{ variable name }}Store == null) {
      return null;
    }
    var {{ variable name }} = {{ fqClass transferObjectTypeName }}();
    map{{ fqClass name }}StoreTo{{ fqClass name }}({{ variable name }}Store, {{ variable name }});
    return {{ variable name }};
  }

  static void map{{ fqClass name }}StoreTo{{ fqClass name }}({{ fqClass name }}Store {{ variable name }}Store, {{ fqClass transferObjectTypeName }} {{ variable name }}) {
    {{# if isMapped }}
    {{ variable name }}.internal__identifier = {{ variable name }}Store.internal__identifier;
    {{ variable name }}.internal__signedIdentifier = {{ variable name }}Store.internal__signedIdentifier;
    {{ variable name }}.internal__referenceId = {{ variable name }}Store.internal__referenceIdentifier;

    {{/ if }}
    // Attributes
    {{# each attributes as |attribute| }}
        {{# unless isReadOnly }}
            {{~# if (isEnumType attribute.dataType) }}
    if ({{ variable class.name }}Store.{{ attribute.name }} != null) {
        {{ variable class.name }}.{{ attribute.name }} = {{ fqClass transferObjectTypeName }}{{ className attribute.name }}Enum.values[{{ variable class.name }}Store.{{ attribute.name }}.index];
    }
            {{ else }}
    {{ variable class.name }}.{{ attribute.name }} = {{ variable class.name }}Store.{{ attribute.name }};
            {{/ if }}
        {{/ unless }}
    {{/ each }}
    // Relations
    {{# each relations }}
        {{# if isRelationEmbedded }}
            {{# unless isReadOnly }}
    if ({{ variable class.name }}Store.{{ name }} != null) {
                {{# if isCollection }}
      {{ variable class.name }}.{{ name }} = {{ variable class.name }}Store.{{ name }}.map<{{ fqClass target.transferObjectTypeName }}>(create{{ fqClass target.name }}From{{ fqClass target.name }}Store).toList();
                {{ else }}
      {{ variable class.name }}.{{ name }} = create{{ fqClass target.name }}From{{ fqClass target.name }}Store({{ variable class.name }}Store.{{ name }});
                {{/ if }}
    }
            {{/ unless }}
        {{/ if }}
    {{/ each }}

  }

  {{# unless isPrincipal}}
      {{# if isMapped}}
          {{# if isClassBehaviourTypeUpdatable }}
  static {{ fqClass transferObjectTypeName }}ForCreateAndUpdate create{{ fqClass name }}ForCreateAndUpdateFrom{{ fqClass name }}Store({{ fqClass name }}Store {{ variable name }}Store) {
    var {{ variable name }} = {{ fqClass transferObjectTypeName }}ForCreateAndUpdate();
    map{{ fqClass name }}StoreTo{{ fqClass name }}ForCreateAndUpdate({{ variable name }}Store, {{ variable name }});
    return {{ variable name }};
  }

  static void map{{ fqClass name }}StoreTo{{ fqClass name }}ForCreateAndUpdate({{ fqClass name }}Store {{ variable name }}Store, {{ fqClass transferObjectTypeName }}ForCreateAndUpdate {{ variable name }}) {
    // Identifier
    {{ variable name }}.internal__referenceId = {{ variable name }}Store.internal__referenceIdentifier;

    // Attributes
    {{# each attributes as |attribute|}}
        {{# unless isReadOnly }}
            {{~# if (isEnumType attribute.dataType) }}
    if ({{ variable class.name }}Store.{{ attribute.name }} != null) {
        {{ variable class.name }}.{{ name }} = {{ fqClass transferObjectTypeName }}ForCreateAndUpdate{{ className attribute.name }}Enum.values[{{ variable class.name }}Store.{{ attribute.name }}.index];
    }
            {{ else }}
    {{ variable class.name }}.{{ name }} = {{ variable class.name }}Store.{{ name }};
            {{/ if }}
        {{/ unless }}
    {{/ each }}
    // Relations
    {{# each relations }}
        {{# if isRelationEmbedded }}
            {{# unless isReadOnly }}
                {{# unless isMemberTypeTransient}}
    if ({{ variable class.name }}Store.{{ name }} != null) {
                    {{# if isCollection }}
      {{ variable class.name }}.{{ name }} = {{ variable class.name }}Store.{{ name }}.map<{{ fqClass target.transferObjectTypeName }}ForCreateAndUpdate>(({{ variable target.name }}Store) {
        return create{{ fqClass target.name }}ForCreateAndUpdateFrom{{ fqClass target.name }}Store({{ variable target.name }}Store);
      }).toList();
                    {{ else }}
      {{ variable class.name }}.{{ name }} = create{{ fqClass target.name }}ForCreateAndUpdateFrom{{ fqClass target.name }}Store({{ variable class.name }}Store.{{ name }});
                    {{/ if }}
    }
                {{/ unless }}
            {{/ unless }}
        {{/ if }}
    {{/ each }}
  }
          {{/ if }}
      {{/ if}}
  {{/ unless}}

  // For rangeable handling
  {{# if isOptional}}
      {{# each relations as |relation| }}
          {{# if relation.isRelationBehaviourTypeRangeable }}
  static {{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }} create{{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }}From{{ fqClass ap.name }}Store({{ fqClass ap.name }}Store {{variable ap.name}}Store) {
    if ({{variable ap.name}}Store == null) {
      return null;
    }
    var {{variable ap.name}} = {{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }}();
    map{{ fqClass ap.name }}StoreTo{{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }}({{variable ap.name}}, {{variable ap.name}}Store);
    return {{variable ap.name}};
  }

  static void map{{ fqClass ap.name }}StoreTo{{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }}({{modelName ap.name}}Extension{{packageName ap.name}}GetRangeInput{{className ap.name}}{{ className relation.name }} {{variable ap.name}}, {{ fqClass ap.name }}Store {{variable ap.name}}Store) {
    var optional{{className ap.name}} = create{{modelName ap.name}}OptionalTransferobjecttypes{{packageName ap.name}}{{className ap.name}}({{variable ap.name}}Store);

    {{variable ap.name}}.owner = optional{{className ap.name}};
  }
          {{/if}}
      {{/ each }}
  static {{modelName ap.name}}OptionalTransferobjecttypes{{packageName name}}{{className name}} create{{modelName ap.name}}OptionalTransferobjecttypes{{packageName name}}{{className name}}({{ fqClass name }}Store {{variable name}}Store) {
    if ({{variable name}}Store == null) {
      return null;
    }
    var optional{{ className name }} = {{modelName ap.name}}OptionalTransferobjecttypes{{packageName name}}{{className name}}();
    {{# if isMapped }}
    optional{{ className name }}.internal__identifier = {{ variable name }}Store.internal__identifier;
    optional{{ className name }}.internal__signedIdentifier = {{ variable name }}Store.internal__signedIdentifier;
    optional{{ className name }}.internal__referenceId = {{ variable name }}Store.internal__referenceIdentifier;

    {{/ if }}
    // Attributes
    {{# each attributes as |attribute|}}
        {{# unless isReadOnly }}
            {{~# if (isEnumType attribute.dataType) }}
    if ({{ variable class.name }}Store.{{ attribute.name }} != null) {
        optional{{ className class.name }}.{{ name }} = optional{{ className class.name }}.{{ attribute.name }}Enum.values[{{ variable class.name }}Store.{{ attribute.name }}.index];
    }
            {{ else }}
    optional{{ className class.name }}.{{ name }} = {{ variable class.name }}Store.{{ name }};
            {{/ if }}
        {{/ unless }}
    {{/ each }}

    // Relations
    {{# each relations }}
        {{# if isRelationEmbedded }}
            {{# unless isReadOnly }}
    if ({{ variable class.name }}Store.{{ name }} != null) {
    {{# if isCollection }}
        optional{{ className class.name }}.{{ name }} = {{ variable class.name }}Store.{{ name }}.map<{{modelName ap.name}}OptionalTransferobjecttypes{{packageName target.name}}{{className target.name}}>(create{{modelName ap.name}}OptionalTransferobjecttypes{{packageName target.name}}{{className target.name}}).toList();
    {{ else }}
        optional{{ className class.name }}.{{ name }} = create{{modelName ap.name}}OptionalTransferobjecttypes{{packageName target.name}}{{className target.name}}({{ variable class.name }}Store.{{ name }});
    {{/ if }}
    }
            {{/ unless }}
        {{/ if }}
    {{/ each }}
    return optional{{ className name }};
  }

  {{/if}}
  //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

{{/ each }}
}
