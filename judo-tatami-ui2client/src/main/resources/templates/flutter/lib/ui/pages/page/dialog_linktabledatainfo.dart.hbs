{{ log 'Dialog table data info generation for' (variable application.name) '-' (fqClass table.pageDefinition.name) (variable table.dataElement.target.name) level='debug' }}
//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

part of {{ pageLibraryName application.name page.name }};

class {{ fqClass table.pageDefinition.name }}{{ fqClass table.name }}DialogTable implements JudoTableDataInfo {

    const {{ fqClass table.pageDefinition.name }}{{ fqClass table.name }}DialogTable(this.context, {this.disabled = false});

    final BuildContext context;
    final bool disabled;

    @override
    List<DataColumn> getColumns(Function onAdd, Function onSort) {
        return [
            {{# each parts as |part| }}
            DataColumn(
                label: Text(AppLocalizations.of(context).lookUpValue(context, '{{ part.label }}')),
                {{# unless (isBooleanDataType part.attributeType.dataType) }}
                    {{# unless (isEnumType part.attributeType.dataType) }}
                onSort: onSort,
                    {{/ unless }}
                {{/ unless }}
            ),
            {{/ each }}
        ];
    }

    @override
    Comparator getSortComparator(int columnIndex, bool asc) {
        {{# each parts as |part| }}
            {{# unless (isBooleanDataType part.attributeType.dataType) }}
                {{# unless (isEnumType part.attributeType.dataType) }}
        if (columnIndex == {{@index}}) {
            if (asc) {
                return (a, b) => a.{{ variable part.attributeType.name }}.compareTo(b.{{ variable part.attributeType.name }});
            } else {
                return (a, b) => b.{{ variable part.attributeType.name }}.compareTo(a.{{ variable part.attributeType.name }});
            }
        }
                {{/ unless }}
            {{/ unless }}
        {{/ each }}
    }

    @override
    String getColumnFieldByIndex(int columnIndex, bool asc) {
    {{# each parts as |part| }}
        {{# unless (isBooleanDataType part.attributeType.dataType) }}
            {{# unless (isEnumType part.attributeType.dataType) }}
        if (columnIndex == {{@index}}) {
            return "{{ variable part.attributeType.name }}";
        }
            {{/ unless }}
        {{/ unless }}
    {{/ each }}
    }

    @override
    Function getRow({BuildContext context,
            Function navigateToEditPageAction,
            Function navigateToViewPageAction,
            Function navigateToCreatePageAction,
            Function removeAction,
            Function unsetAction,
            Function deleteAction}) {

        ThemeData theme =  Theme.of(context);
        return (target{{ className table.dataElement.target.name }}) => DataRow(
            cells: [
                {{# each parts as |part| }}
                DataCell(
                    {{# if part }}
                    {{> (getWidgetTemplate part) column=part dataName=(className table.dataElement.target.name) }}
                    {{/ if }}
                ),
                {{/ each }}
            ],
        );
    }
}
