{{log 'Filter store generation for' (variable application.name) level='debug'}}
//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

part of {{ variable application.name }}.ui.pages.dialogs.helperStores;

enum FilterType {
    boolean, numeric, string, enumeration, date, dateTime
}

class FilterStore extends _FilterStore with _$FilterStore {
  String attributeLabel;

  String attributeName;

  FilterType filterType;

  /// Just for Enumerations
  List enumValues;

  FilterStore({this.attributeLabel, this.attributeName, this.filterType, this.enumValues}) : super(attributeLabel, attributeName, filterType, enumValues: enumValues);

  FilterStore.clone(FilterStore filterStore) : super.clone(filterStore);
}

abstract class _FilterStore with Store {
  _FilterStore(this.attributeLabel, this.attributeName, this.filterType, {this.enumValues}){
    filterOperation = defaultFilterOperation[filterType.toString().split('.').last];
  }

  _FilterStore.clone(FilterStore filterStore) {
    this.attributeLabel = filterStore.attributeLabel;
    this.attributeName = filterStore.attributeName;
    this.filterType = filterStore.filterType;
    if (filterStore.enumValues != null) {
        this.enumValues = List.of(filterStore.enumValues);
    }
    this.filterOperation = filterStore.filterOperation;
    this.filterValue = filterStore.filterValue;
    this.widgetLabel = filterStore.widgetLabel;
  }

  String attributeLabel;

  String attributeName;

  FilterType filterType;

  List enumValues;

  @observable
  String filterOperation;

  @observable
  dynamic filterValue;

  @observable
  String widgetLabel = '';

  @action
  void setWidgetLabel(BuildContext context) => widgetLabel = AppLocalizations.of(context).lookUpValue(context, attributeLabel) + ' ' + AppLocalizations.of(context).lookUpValue(context, filterOperation);

  @action
  void setFilterOperation(String filterOperation) => this.filterOperation = filterOperation;

  @action
  void setFilterValue(dynamic newValue) {
    filterValue = newValue;
  }

  @computed
  Icon get getOperationIcon {
    return Icon(MdiIcons.fromString(filterOperationIcons[filterOperation]));
  }

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
          other is _FilterStore && runtimeType == other.runtimeType && attributeName == other.attributeName;

  @override
  int get hashCode => attributeName.hashCode;
}
