{{ log 'Pagestore generation for' (variable application.name) '-' (fqClass page.name) level='debug' }}
//START editpagestore.dart.hbs-----{{ page.name }}-------------------------------------------------------------------------------------------
class {{ fqClass page.name }}PageStore extends _{{ fqClass page.name }}PageStore with _${{ fqClass page.name }}PageStore {}

abstract class _{{ fqClass page.name }}PageStore with Store {
    {{# with page.relationType as |relation| }}
    {{ repositoryClassName application.actor.name }} _actorRepository = locator<{{ repositoryClassName application.actor.name }}>();

    @observable
    String errorMessage;

    {{# if (validatableFlagNeed relation) }}
    bool validatable = true;
    {{/ if }}

    {{# if relation.isRelationBehaviourTypeRefreshable }}
    @action
    Future<void> refresh{{ className relation.target.name }}({{ storeClassName relation.target.name }} targetStore) async {
        try {
            errorMessage = null;
            targetStore.updateWith(await _actorRepository.{{ fqVariable relation.target.name }}GetByIdentifier(targetStore));
        } on ApiException catch (error) {
            errorMessage = "Could not refresh {{ relation.target.name }}";
            throw error;
        }
    }

    {{/ if }}
    {{# if relation.isRelationBehaviourTypeUpdateValidatable }}
    @action
    Future<{{ storeClassName relation.target.name }}> validate({{ storeClassName relation.target.name }} targetStore) async {
            try {
            errorMessage = null;
            return await _actorRepository.{{ fqVariable relation.target.name }}ValidateForUpdate(targetStore);
        } on ApiException catch (error) {
            errorMessage = "Could not validate {{ relation.target.name }}";
            throw error;
        }
    }

    {{/ if }}
    {{/ with }}
    {{# each page.dataElement.target.relations as |relation| }}
        {{# unless isRelationKindStatic }}
            {{# unless isRelationKindAssociation }}
    {{> templates/flutter/lib/ui/pages/pagetypesfragments/storeactions/embedded_collection_table_order_action.dart.hbs page=page relation=relation}}
            {{/ unless }}
        {{/ unless }}
        {{# unless isMemberTypeTransient }}
            {{# if isRelationKindAggregation }}
    {{> templates/flutter/lib/ui/pages/pagetypesfragments/storeactions/aggregationactions.dart.hbs page=page relation=relation }}
            {{/ if }}
            {{# if isRelationKindComposition }}
    {{> templates/flutter/lib/ui/pages/pagetypesfragments/storeactions/aggregationactions.dart.hbs page=page relation=relation }}
            {{/ if }}
        {{/ unless }}
    {{/ each }}
}
//END editpagestore.dart.hbs-----{{ page.name }}---------------------------------------------------------------------------------------------
