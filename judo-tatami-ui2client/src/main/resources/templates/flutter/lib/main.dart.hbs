//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:{{ modelPackage application.dataElement.name }}/{{ path application.dataElement.name }}/utilities/package.dart';
import 'package:{{ modelPackage application.dataElement.name }}/{{ path application.dataElement.name }}/store/package.dart';
import 'package:{{ modelPackage application.dataElement.name }}/{{ path application.dataElement.name }}/ui/route_map.dart';
import 'package:{{ modelPackage application.dataElement.name }}/{{ path application.dataElement.name }}/ui/dashboard.dart';

void main() {
  runApp({{ fqClass application.dataElement.name }}Application());
}

class {{ fqClass application.dataElement.name }}Application extends StatelessWidget {
  @override
  Widget build(BuildContext context) => MultiProvider(
        providers: [
          Provider<{{ fqClass application.dataElement.name }}GlobalStore>(create: (_) => {{ fqClass application.dataElement.name }}GlobalStore())
        ],
        child: MaterialApp(
          theme: ThemeData.light().copyWith(
            primaryColor: kPrimaryColor,
            pageTransitionsTheme: PageTransitionsTheme(
              // makes all platforms that can run Flutter apps display routes without any animation
              builders: Map<TargetPlatform, _InanimatePageTransitionsBuilder>.fromIterable(
                  TargetPlatform.values.toList(),
                  key: (dynamic k) => k,
                  value: (dynamic _) => const _InanimatePageTransitionsBuilder()),
            ),
          ),
//          home: SafeArea(
//            child: LayoutBuilder(builder: (context, constraints) {
//              if (constraints.maxWidth >= 980) {
//                SizingInformation.maxCol = 12;
//                SizingInformation.padding = kJudoCardPadding;
//                SizingInformation.margin = kJudoCardMargin;
//
//                return NorthwindExternalAPHomePage();
//              } else if (constraints.maxWidth < 980 &&
//                  constraints.maxWidth > 500) {
//                SizingInformation.maxCol = 8;
//                SizingInformation.padding = kJudoCardPadding / 2;
//                SizingInformation.margin = kJudoCardMargin / 2;
//
//                return NorthwindExternalAPHomePage();
//              } else {
//                SizingInformation.maxCol = 4;
//                SizingInformation.padding = kJudoCardPadding / 4;
//                SizingInformation.margin = kJudoCardMargin / 4;
//
//                return NorthwindExternalAPHomePage();
//              }
//            }),
//          ),
          initialRoute: NorthwindExternalAPDashboard.route,
          navigatorObservers: [AppRouteObserver()],
          routes: NorthwindExternalAPRoutes.routes(),
        ),
      );
}

/// This class is used to build page transitions that don't have any animation
class _InanimatePageTransitionsBuilder extends PageTransitionsBuilder {
  const _InanimatePageTransitionsBuilder();

  @override
  Widget buildTransitions<T>(PageRoute<T> route, BuildContext context, Animation<double> animation,
      Animation<double> secondaryAnimation, Widget child) {
    return child;
  }
}
