//////////////////////////////////////////////////////////////////////////////
// G E N E R A T E D    C L A S S
// ------------------------------
// Factory expression: {{{ cleanup template.factoryExpression }}}
// Path expression: {{{ cleanup template.pathExpression }}}
// Overwrite: {{{ cleanup template.overwriteExpression }}}
// Template name: {{ template.templateName }}
// Application: {{ application.name }}

part of {{ variable application.actor.name }}.store;

class {{ fqClass name }}Store extends _{{ fqClass name }}Store
    with _${{ fqClass name }}Store {

    {{ fqClass name }}Store() : super();

    {{ fqClass name }}Store.clone({{ fqClass name }}Store {{ fqVariable name }}) : super.clone({{ fqVariable name }});

}

abstract class _{{ fqClass name }}Store with Store {
  _{{ fqClass name }}Store();

  _{{ fqClass name }}Store.clone({{ fqClass name }}Store {{ variable name }}Store) {
    internal__identifier = {{ variable name }}Store.internal__identifier;
    internal__signedIdentifier = {{ variable name }}Store.internal__signedIdentifier;
    internal__referenceIdentifier = {{ variable name }}Store.internal__referenceIdentifier;
    internal__updatable = {{ variable name }}Store.internal__updatable ?? true;
    internal__deletable = {{ variable name }}Store.internal__deletable ?? true;

    {{# each attributes }}
    {{ variable name }} = {{ variable ../name }}Store.{{ variable name }};
    {{/ each }}

    // Relations
    {{# each relations }}
      {{#  if isCollection }}
    if ({{ variable ../name }}Store.{{ variable name }} != null) {
      {{ variable name }} = ObservableList.of({{ variable ../name }}Store.{{ variable name }});
    } else {
      {{ variable name }} = ObservableList.of([]);
    }
      {{ else }}
    if ({{ variable ../name }}Store.{{ variable name }} != null) {
      {{ variable name }} = {{ fqClass target.name }}Store.clone({{ variable ../name }}Store.{{ variable name }});
    } else {
      {{ variable name }} = null;
    }
      {{/ if }}
    {{/ each }}
  }

  // ignore: non_constant_identifier_names
  String internal__identifier;

  // ignore: non_constant_identifier_names
  String internal__signedIdentifier;

  // ignore: non_constant_identifier_names
  String internal__referenceIdentifier = Uuid().v1();

  // ignore: non_constant_identifier_names
  bool internal__updatable = true;

  // ignore: non_constant_identifier_names
  bool internal__deletable = true;

  // Attributes
  {{# each attributes }}

  @observable
  {{ dartType dataType }} {{ variable name }};

  {{/ each }}

  // Relations
  {{# each relations }}
    {{#  if isCollection }}

  @observable
  var {{ variable name }} = ObservableList<{{ fqClass target.name }}Store>();
    {{ else }}

  @observable
  {{ fqClass target.name }}Store {{ variable name }};
    {{/ if }}
  {{/ each }}


  // Attributes
  {{# each attributes }}
  @action
  void set{{ className name }}({{ dartType dataType }} {{ variable name }}) {
    this.{{ variable name }} = {{ variable name }};
  }
  {{/ each}}

  // Relations
  {{#each relations }}
    {{# if isCollection }}
  @action
  void set{{ className name }}(List<{{ fqClass target.name }}Store> {{ variable name }}) {
    this.{{ variable name }}.clear();
    this.{{ variable name }}.addAll({{ variable name }});
  }
    {{ else }}
  @action
  void set{{ className name }}({{ fqClass target.name }}Store {{ variable name }}) {
    this.{{ variable name }} = {{ variable name }};
  }
    {{/ if }}

{{/ each }}


  @override
  bool operator ==(Object other) =>
    identical(this, other) ||
    other is _{{ fqClass name }}Store &&
        runtimeType == other.runtimeType &&
        (
          (
            internal__signedIdentifier == other.internal__signedIdentifier &&
            internal__signedIdentifier != null &&
            other.internal__signedIdentifier != null
          ) || (
            internal__identifier == other.internal__identifier &&
            internal__identifier != null &&
            other.internal__identifier != null
          ) || (
            internal__referenceIdentifier == other.internal__referenceIdentifier &&
            internal__referenceIdentifier != null &&
            other.internal__referenceIdentifier != null
          )
        );

  @override
  int get hashCode => hash3(internal__signedIdentifier, internal__identifier, internal__referenceIdentifier);

  @action
  void updateWith({{ fqClass name }}Store {{ variable name }}Store) {
    internal__identifier = {{ variable name }}Store.internal__identifier;
    internal__signedIdentifier = {{ variable name }}Store.internal__signedIdentifier;
    internal__referenceIdentifier = {{ variable name }}Store.internal__referenceIdentifier;
    internal__updatable = {{ variable name }}Store.internal__updatable ?? true;
    internal__deletable = {{ variable name }}Store.internal__deletable ?? true;

    {{# each attributes }}
      {{ variable name }} = {{ variable ../name }}Store.{{ variable name }};
    {{/ each }}

    // Relations
    {{# each relations }}
      {{# if isCollection }}
    if ({{ variable ../name }}Store.{{ variable name }} != null) {
      {{ variable name }} = ObservableList.of({{ variable ../name }}Store.{{ variable name }});
    } else {
      {{ variable name }} = ObservableList.of([]);
    }
      {{ else }}
    if ({{ variable ../name }}Store.{{ variable name }} != null) {
      {{ variable name }} = {{ fqClass target.name }}Store.clone({{ variable ../name }}Store.{{ variable name }});
    } else {
      {{ variable name }} = null;
    }
      {{/ if }}
    {{/ each }}
  }

    ////

    /*
    @observable
    ObservableFuture<NorthwindServicesProductInfoStore> _northwindServicesProductInfoStoreFuture;

    @computed
    StoreState get store__state {
      if (_northwindServicesProductInfoStoreFuture == null ||
       _northwindServicesProductInfoStoreFuture.status == FutureStatus.rejected) {
        return StoreState.initial;
      }
      return _northwindServicesProductInfoStoreFuture.status == FutureStatus.pending
        ? StoreState.loading
        : StoreState.loaded;
    }
    */

}
